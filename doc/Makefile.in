PDFLATEX = @PDFLATEX@
XSLTPROC = @XSLTPROC@
DBLATEX = @DBLATEX@

all: guide.pdf manual-html/index.html manual.pdf bvar-a-la-sims.pdf
	make -C preprocessor
	make -C macroprocessor
	make -C userguide
.PHONY: all

guide.pdf: guide.tex guide.bbl bibmad.sty
ifdef PDFLATEX
	$(PDFLATEX) guide
	$(PDFLATEX) guide
endif

bvar-a-la-sims.pdf: bvar-a-la-sims.tex
ifdef PDFLATEX
	$(PDFLATEX) bvar-a-la-sims
	$(PDFLATEX) bvar-a-la-sims
endif

manual-html/index.html: manual.xml dynare_html.xsl
ifdef XSLTPROC
	$(XSLTPROC) -stringparam base.dir ./manual-html/ dynare_html.xsl manual.xml
endif

manual.pdf: manual.xml
ifdef DBLATEX
	$(DBLATEX) manual.xml
endif

clean:
	rm -f *~ *.pdf *.log *.aux
	rm -rf manual-html
	make -C preprocessor clean
	make -C macroprocessor clean
	make -C userguide clean
.PHONY: clean
